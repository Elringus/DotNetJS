<Project>

    <PropertyGroup>
        <Configuration>Release</Configuration>
        <PublishTrimmed>true</PublishTrimmed>
        <InvariantGlobalization>true</InvariantGlobalization>
        <BlazorWebAssemblyEnableLinking>true</BlazorWebAssemblyEnableLinking>
        <BlazorEnableTimeZoneSupport>false</BlazorEnableTimeZoneSupport>
        <BlazorEnableCompression>false</BlazorEnableCompression>
        <BlazorCacheBootResources>false</BlazorCacheBootResources>
        <PackerAssembly>$(MSBuildThisFileDirectory)../tasks/Packer.dll</PackerAssembly>
        <JSDir>$(MSBuildThisFileDirectory)../js</JSDir>
        <WasmFile>$(JSDir)/dotnet.wasm</WasmFile>
    </PropertyGroup>

    <ItemGroup>
        <TrimmerRootDescriptor Include="$(MSBuildThisFileDirectory)DotNetJSLinker.xml"/>
    </ItemGroup>

    <UsingTask TaskName="DotNetJS.Packer.PackUMD" AssemblyFile="$(PackerAssembly)"/>

    <Target Name="PublishJS" AfterTargets="Publish">
        <PackUMD BaseDir="$(BaseOutputPath)"
                 OutDir="$(OutDir)"
                 JSDir="$(JSDir)"
                 WasmFile="$(WasmFile)"
                 EntryAssemblyName="$(AssemblyName)"
                 LibraryName="$(LibraryName)"
                 Clean="$(Clean)"/>
    </Target>

</Project>
